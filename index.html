function updateScoreDisplays() {
const { x, y } = userPosition;

// Convert position to scores (0-100 scale)
const speedScore = Math.round(Math.max(0, Math.min(100, (x + 100) / 2)));
const resilienceScore = Math.round(Math.max(0, Math.min(100, (y + 100) / 2)));

// If we have quiz scores, use those; otherwise use position
let finalScores;
if (scores.speed !== 0 || scores.accuracy !== 0 || scores.resilience !== 0 || scores.adaptability !== 0) {
// New scoring system with negative values and wider ranges
const maxPossibleScore = questions.length * 45; // Max positive score per dimension
const minPossibleScore = questions.length * -50; // Max negative score per dimension
const scoreRange = maxPossibleScore - minPossibleScore;

finalScores = {
speed: Math.round(Math.max(0, Math.min(100, ((scores.speed - minPossibleScore) / scoreRange) * 100))),
accuracy: Math.round(Math.max(0, Math.min(100, ((scores.accuracy - minPossibleScore) / scoreRange) * 100))),
resilience: Math.round(Math.max(0, Math.min(100, ((scores.resilience - minPossibleScore) / scoreRange) * 100))),
adaptability: Math.round(Math.max(0, Math.min(100, ((scores.adaptability - minPossibleScore) / scoreRange) * 100)))
};
} else {
finalScores = {
speed: speedScore,
accuracy: Math.round((speedScore + resilienceScore) / 2),
resilience: resilienceScore,
adaptability: Math.round((Math.abs(x) + Math.abs(y)) / 2
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelligence Under Pressure Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .hidden {
            display: none;
        }

        /* Quiz Styles */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .quiz-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            color: #1f2937;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .quiz-title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .question-counter {
            text-align: right;
        }

        .question-counter .label {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 5px;
        }

        .question-counter .numbers {
            font-size: 1.5rem;
            font-weight: bold;
            color: #374151;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e5e7eb;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ef4444);
            border-radius: 6px;
            transition: width 0.5s ease;
            width: 4%;
        }

        .pressure-alert {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
        }

        .pressure-alert .icon {
            font-size: 1.5rem;
            margin-right: 15px;
        }

        .pressure-alert .text {
            font-weight: 600;
            color: #b91c1c;
        }

        .question-text {
            font-size: 1.4rem;
            font-weight: 600;
            color: #1f2937;
            line-height: 1.6;
            margin-bottom: 40px;
        }

        .answers-container {
            margin-bottom: 40px;
        }

        .answer-btn {
            width: 100%;
            background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            display: flex;
            align-items: flex-start;
        }

        .answer-btn:hover {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .answer-btn .radio {
            width: 24px;
            height: 24px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            margin-right: 15px;
            margin-top: 2px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .answer-btn:hover .radio {
            border-color: #3b82f6;
        }

        .answer-btn:hover .radio::after {
            content: '';
            width: 8px;
            height: 8px;
            background: #3b82f6;
            border-radius: 50%;
        }

        .answer-btn .text {
            font-weight: 500;
            color: #374151;
            line-height: 1.5;
            font-size: 1.1rem;
        }

        .quiz-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-btn {
            padding: 12px 24px;
            background: #f3f4f6;
            color: #6b7280;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover:not(:disabled) {
            background: #e5e7eb;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quiz-hint {
            text-align: center;
            color: #6b7280;
            font-size: 0.9rem;
        }

        /* Main View Styles */
        .main-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .main-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #fbbf24, #ef4444, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .main-subtitle {
            font-size: 1.3rem;
            color: #d1d5db;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto 40px;
        }

        .start-btn {
            background: linear-gradient(135deg, #ef4444, #fbbf24);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            align-items: start;
        }

        .compass-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .compass-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
        }

        .compass-title {
            text-align: center;
            margin-bottom: 20px;
        }

        .compass-title h3 {
            font-size: 1.5rem;
            color: #1f2937;
            margin-bottom: 5px;
        }

        .compass-title p {
            color: #6b7280;
        }

        .compass-svg {
            width: 100%;
            height: 600px;
            cursor: pointer;
            background-image:
                linear-gradient(rgba(71, 85, 105, 0.2) 1px, transparent 1px),
                linear-gradient(90deg, rgba(71, 85, 105, 0.2) 1px, transparent 1px);
            background-size: 25px 25px;
            border-radius: 10px;
        }

        .user-dot {
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .user-dot:hover {
            filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.3));
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .card {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .card-content {
            background: white;
            border-radius: 15px;
            padding: 25px;
        }

        .card h3 {
            font-size: 1.4rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .card h3 .emoji {
            margin-right: 10px;
        }

        .overall-score {
            text-align: center;
        }

        .score-badge {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #78350f;
            font-weight: bold;
            padding: 15px 25px;
            border-radius: 12px;
            font-size: 2rem;
            margin-bottom: 15px;
            display: inline-block;
        }

        .intelligence-level {
            font-size: 1.2rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }

        .percentile {
            color: #6b7280;
        }

        .dimension {
            margin-bottom: 25px;
        }

        .dimension-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .dimension-label {
            color: #374151;
            font-weight: 600;
        }

        .dimension-score {
            font-weight: bold;
            color: #3b82f6;
        }

        .dimension-bar {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .dimension-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .speed-fill {
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
        }

        .accuracy-fill {
            background: linear-gradient(90deg, #10b981, #059669);
        }

        .resilience-fill {
            background: linear-gradient(90deg, #8b5cf6, #7c3aed);
        }

        .adaptability-fill {
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .dimension-desc {
            font-size: 0.8rem;
            color: #6b7280;
        }

        .profile-description {
            color: #374151;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .strengths-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 10px;
        }

        .strength-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .strength-dot {
            width: 6px;
            height: 6px;
            background: #10b981;
            border-radius: 50%;
            margin-right: 10px;
            margin-top: 6px;
            flex-shrink: 0;
        }

        .strength-text {
            color: #6b7280;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .info-card {
            background: #374151;
            border-radius: 20px;
            padding: 25px;
            border: 1px solid #4b5563;
        }

        .info-card h4 {
            color: white;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .info-card h4 .emoji {
            margin-right: 10px;
        }

        .info-card p {
            color: #d1d5db;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .main-title {
                font-size: 2.5rem;
            }

            .quiz-card {
                padding: 25px;
            }

            .quiz-title {
                font-size: 2rem;
            }

            .compass-svg {
                height: 400px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Quiz View -->
        <div id="quiz-view" class="hidden">
            <div class="quiz-container">
                <div class="quiz-card">
                    <div class="quiz-header">
                        <h2 class="quiz-title">Intelligence Under Pressure</h2>
                        <div class="question-counter">
                            <div class="label">Scenario</div>
                            <div class="numbers">
                                <span id="current-q">1</span> of <span id="total-q">25</span>
                            </div>
                        </div>
                    </div>

                    <div class="progress-bar">
                        <div id="progress-bar" class="progress-fill"></div>
                    </div>

                    <div class="pressure-alert">
                        <span class="icon">⚡</span>
                        <span class="text">HIGH PRESSURE SCENARIO</span>
                    </div>

                    <div class="question-text" id="question-text">
                        <!-- Question will be inserted here -->
                    </div>

                    <div class="answers-container" id="answers-container">
                        <!-- Answers will be inserted here -->
                    </div>

                    <div class="quiz-nav">
                        <button id="back-btn" class="nav-btn" disabled>← Previous</button>
                        <div class="quiz-hint">
                            <div>Choose your most honest response</div>
                            <div style="font-size: 0.8rem; margin-top: 3px;">This measures real problem-solving ability
                            </div>
                        </div>
                        <button id="skip-btn" class="nav-btn">Skip →</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Assessment View -->
        <div id="compass-view">
            <div class="main-header">
                <h1 class="main-title">Intelligence Under Pressure</h1>
                <p class="main-subtitle">
                    True intelligence isn't just knowledge—it's the ability to solve problems quickly and accurately
                    when it matters most.
                    How do you perform when the pressure is on?
                </p>
                <button id="start-quiz-btn" class="start-btn">
                    🧠 Measure Your Intelligence
                </button>
            </div>

            <div class="main-content">
                <div class="compass-section">
                    <div class="compass-container">
                        <div class="compass-title">
                            <h3>Problem-Solving Intelligence Map</h3>
                            <p>Speed vs. Resilience Under Pressure</p>
                        </div>

                        <svg id="compass-svg" class="compass-svg" viewBox="0 0 600 600">
                            <!-- Quadrant backgrounds -->
                            <rect x="300" y="0" width="300" height="300" fill="#10b981" opacity="0.15" />
                            <rect x="0" y="0" width="300" height="300" fill="#3b82f6" opacity="0.15" />
                            <rect x="0" y="300" width="300" height="300" fill="#ef4444" opacity="0.15" />
                            <rect x="300" y="300" width="300" height="300" fill="#f59e0b" opacity="0.15" />

                            <!-- Quadrant labels -->
                            <text x="150" y="30" text-anchor="middle" fill="#1e40af" font-size="16" font-weight="bold">
                                METHODICAL GENIUS
                            </text>
                            <text x="150" y="50" text-anchor="middle" fill="#1e40af" font-size="12" font-weight="600">
                                Slow + Resilient • High Intelligence
                            </text>

                            <text x="450" y="30" text-anchor="middle" fill="#047857" font-size="16" font-weight="bold">
                                PRESSURE PERFORMER
                            </text>
                            <text x="450" y="50" text-anchor="middle" fill="#047857" font-size="12" font-weight="600">
                                Fast + Resilient • Highest Intelligence
                            </text>

                            <text x="150" y="580" text-anchor="middle" fill="#dc2626" font-size="16" font-weight="bold">
                                OVERWHELMED
                            </text>
                            <text x="150" y="560" text-anchor="middle" fill="#dc2626" font-size="12" font-weight="600">
                                Slow + Fragile • Low Intelligence
                            </text>

                            <text x="450" y="580" text-anchor="middle" fill="#d97706" font-size="16" font-weight="bold">
                                QUICK BURNOUT
                            </text>
                            <text x="450" y="560" text-anchor="middle" fill="#d97706" font-size="12" font-weight="600">
                                Fast + Fragile • Medium Intelligence
                            </text>

                            <!-- Main axes -->
                            <line x1="300" y1="0" x2="300" y2="600" stroke="#1f2937" stroke-width="3" />
                            <line x1="0" y1="300" x2="600" y2="300" stroke="#1f2937" stroke-width="3" />

                            <!-- Axis labels -->
                            <text x="580" y="310" text-anchor="middle" fill="#374151" font-size="18" font-weight="bold">
                                SPEED →
                            </text>
                            <text x="290" y="25" text-anchor="middle" fill="#374151" font-size="18" font-weight="bold"
                                transform="rotate(-90 290 25)">
                                ← RESILIENCE
                            </text>

                            <!-- Score indicators -->
                            <text x="30" y="310" text-anchor="middle" fill="#6b7280" font-size="14"
                                font-weight="600">0</text>
                            <text x="570" y="310" text-anchor="middle" fill="#6b7280" font-size="14"
                                font-weight="600">100</text>
                            <text x="290" y="590" text-anchor="middle" fill="#6b7280" font-size="14"
                                font-weight="600">0</text>
                            <text x="290" y="25" text-anchor="middle" fill="#6b7280" font-size="14"
                                font-weight="600">100</text>

                            <!-- User point -->
                            <circle id="user-dot" cx="300" cy="300" r="12" fill="#dc2626" stroke="white"
                                stroke-width="4" class="user-dot" />
                            <text id="user-label" x="300" y="280" text-anchor="middle" fill="#1f2937" font-size="14"
                                font-weight="bold">YOU</text>
                        </svg>
                    </div>
                </div>

                <div class="sidebar">
                    <!-- Overall Score -->
                    <div class="card">
                        <div class="card-content overall-score">
                            <h3><span class="emoji">🧠</span>Intelligence Score</h3>
                            <div id="overall-score" class="score-badge">50/100</div>
                            <div id="intelligence-level" class="intelligence-level">Average Problem Solver</div>
                            <div id="percentile" class="percentile">50th percentile</div>
                        </div>
                    </div>

                    <!-- Detailed Scores -->
                    <div class="card">
                        <div class="card-content">
                            <h3><span class="emoji">📊</span>Intelligence Breakdown</h3>

                            <div class="dimension">
                                <div class="dimension-header">
                                    <span class="dimension-label">⚡ Processing Speed</span>
                                    <span id="speed-score" class="dimension-score">50/100</span>
                                </div>
                                <div class="dimension-bar">
                                    <div id="speed-fill" class="dimension-fill speed-fill" style="width: 50%"></div>
                                </div>
                                <div class="dimension-desc">How quickly you analyze and respond</div>
                            </div>

                            <div class="dimension">
                                <div class="dimension-header">
                                    <span class="dimension-label">🎯 Accuracy Rate</span>
                                    <span id="accuracy-score" class="dimension-score">50/100</span>
                                </div>
                                <div class="dimension-bar">
                                    <div id="accuracy-fill" class="dimension-fill accuracy-fill" style="width: 50%">
                                    </div>
                                </div>
                                <div class="dimension-desc">How often you find correct solutions</div>
                            </div>

                            <div class="dimension">
                                <div class="dimension-header">
                                    <span class="dimension-label">🛡️ Pressure Resilience</span>
                                    <span id="resilience-score" class="dimension-score">50/100</span>
                                </div>
                                <div class="dimension-bar">
                                    <div id="resilience-fill" class="dimension-fill resilience-fill" style="width: 50%">
                                    </div>
                                </div>
                                <div class="dimension-desc">How well you perform under stress</div>
                            </div>

                            <div class="dimension">
                                <div class="dimension-header">
                                    <span class="dimension-label">🔄 Adaptability</span>
                                    <span id="adaptability-score" class="dimension-score">50/100</span>
                                </div>
                                <div class="dimension-bar">
                                    <div id="adaptability-fill" class="dimension-fill adaptability-fill"
                                        style="width: 50%"></div>
                                </div>
                                <div class="dimension-desc">How quickly you pivot when stuck</div>
                            </div>
                        </div>
                    </div>

                    <!-- Intelligence Profile -->
                    <div class="card">
                        <div class="card-content">
                            <h3 id="profile-title"><span class="emoji">🎭</span>The Balanced Thinker</h3>
                            <div id="profile-description" class="profile-description">
                                You demonstrate average problem-solving capabilities across most scenarios.
                            </div>
                            <div class="strengths-title">Key Strengths:</div>
                            <div id="strengths-list">
                                <div class="strength-item">
                                    <div class="strength-dot"></div>
                                    <span class="strength-text">Maintains steady performance</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="info-card">
                        <h4><span class="emoji">💡</span>About This Assessment</h4>
                        <p>
                            This assessment measures practical intelligence: your ability to solve real problems under
                            pressure.
                            It evaluates speed, accuracy, resilience, and adaptability in high-stakes scenarios.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced scoring system with negative values and wider ranges
        const questions = [
            {
                text: "You need to choose a vendor for a $500K project. You have 2 hours before the deadline. You:",
                answers: [
                    { text: "Go with the vendor I've worked with before - I know they're reliable", speed: 40, accuracy: -10, resilience: 20, adaptability: -20 },
                    { text: "Quickly compare the top 3 proposals on price and timeline", speed: 35, accuracy: -15, resilience: 10, adaptability: 5 },
                    { text: "Spend time calling references for the most promising vendor", speed: -30, accuracy: 45, resilience: 30, adaptability: 15 },
                    { text: "Ask for a 24-hour extension to properly evaluate all options", speed: -40, accuracy: 35, resilience: 5, adaptability: 25 }
                ]
            },
            {
                text: "Your team is debating two approaches to solve a critical bug. The meeting is running long. You:",
                answers: [
                    { text: "Call for a quick vote to decide and move forward", speed: 45, accuracy: -25, resilience: 10, adaptability: -15 },
                    { text: "Suggest we try the simpler approach first since it's faster to implement", speed: 30, accuracy: 0, resilience: 15, adaptability: 10 },
                    { text: "Insist we take time to properly analyze both approaches first", speed: -35, accuracy: 40, resilience: 25, adaptability: 0 },
                    { text: "Propose splitting into two groups to prototype both solutions", speed: 0, accuracy: 25, resilience: 35, adaptability: 45 }
                ]
            },
            {
                text: "A client wants an answer to their pricing question immediately, but you need to check with legal first. You:",
                answers: [
                    { text: "Give them a ballpark estimate based on similar projects", speed: 45, accuracy: -30, resilience: 5, adaptability: 0 },
                    { text: "Tell them I'll have an answer within the hour after checking internally", speed: -5, accuracy: 40, resilience: 25, adaptability: 15 },
                    { text: "Explain that pricing is complex and schedule a call for tomorrow", speed: -25, accuracy: 30, resilience: 15, adaptability: 0 },
                    { text: "Quickly conference in someone from legal to answer on the spot", speed: 25, accuracy: 20, resilience: 30, adaptability: 40 }
                ]
            },
            {
                text: "You discover a potential security vulnerability in your code 30 minutes before launch. You:",
                answers: [
                    { text: "Deploy as planned - it's probably not a real threat", speed: 45, accuracy: -45, resilience: -20, adaptability: -25 },
                    { text: "Do a quick patch for the most obvious issue and deploy", speed: 35, accuracy: -15, resilience: 10, adaptability: 5 },
                    { text: "Delay the launch until tomorrow to properly investigate and fix", speed: -40, accuracy: 45, resilience: 40, adaptability: 25 },
                    { text: "Deploy with monitoring in place and fix immediately if issues arise", speed: 20, accuracy: 0, resilience: 25, adaptability: 35 }
                ]
            },
            {
                text: "Your presentation to executives is in 10 minutes and you notice an error in your key financial projection. You:",
                answers: [
                    { text: "Present as-is and hope no one notices the error", speed: 40, accuracy: -50, resilience: -25, adaptability: -30 },
                    { text: "Quickly recalculate and update just that one slide", speed: 25, accuracy: 5, resilience: 20, adaptability: 10 },
                    { text: "Remove the slide entirely and adjust my presentation", speed: 10, accuracy: 15, resilience: 25, adaptability: 35 },
                    { text: "Start by acknowledging the error and presenting the corrected data", speed: -10, accuracy: 45, resilience: 40, adaptability: 25 }
                ]
            },
            {
                text: "A journalist wants a quote about your company's new product launch. The PR team is unavailable. You:",
                answers: [
                    { text: "Give them a quick statement based on what I know", speed: 40, accuracy: -20, resilience: 0, adaptability: -10 },
                    { text: "Tell them I'll need to get back to them with an official statement", speed: -10, accuracy: 35, resilience: 20, adaptability: 5 },
                    { text: "Refer them to our press kit and decline to comment personally", speed: 5, accuracy: 20, resilience: 25, adaptability: -15 },
                    { text: "Get the PR team on the phone immediately before responding", speed: -5, accuracy: 40, resilience: 30, adaptability: 40 }
                ]
            },
            {
                text: "You're reviewing a contract with a tight signing deadline, but some terms seem unclear. You:",
                answers: [
                    { text: "Sign it - we can clarify the details during implementation", speed: 45, accuracy: -35, resilience: -10, adaptability: -20 },
                    { text: "Sign with a note requesting clarification on specific terms", speed: 25, accuracy: 0, resilience: 15, adaptability: 15 },
                    { text: "Call the other party to clarify the unclear terms before signing", speed: -15, accuracy: 40, resilience: 25, adaptability: 25 },
                    { text: "Request a contract amendment with clearer language", speed: -35, accuracy: 35, resilience: 20, adaptability: 10 }
                ]
            },
            {
                text: "Your team needs to estimate project time for a proposal due today. The scope is somewhat unclear. You:",
                answers: [
                    { text: "Use our standard multiplier from similar projects", speed: 40, accuracy: 0, resilience: 15, adaptability: -15 },
                    { text: "Add 20% buffer to my best guess and submit", speed: 35, accuracy: -10, resilience: 10, adaptability: 5 },
                    { text: "Call the client to clarify scope before estimating", speed: -25, accuracy: 45, resilience: 25, adaptability: 35 },
                    { text: "Submit a range estimate with assumptions clearly stated", speed: 5, accuracy: 35, resilience: 25, adaptability: 25 }
                ]
            },
            {
                text: "You're asked to recommend hiring someone, but you only had a brief interaction with them. You:",
                answers: [
                    { text: "Give my impression based on our limited interaction", speed: 35, accuracy: -25, resilience: 0, adaptability: -15 },
                    { text: "Recommend a more thorough evaluation process instead", speed: -25, accuracy: 45, resilience: 30, adaptability: 25 },
                    { text: "Decline to give a recommendation due to limited data", speed: 0, accuracy: 25, resilience: 25, adaptability: 0 },
                    { text: "Suggest involving others who know them better", speed: -5, accuracy: 35, resilience: 20, adaptability: 40 }
                ]
            },
            {
                text: "A customer is demanding a refund for a product you're not sure they actually purchased. You:",
                answers: [
                    { text: "Give the refund to avoid escalation", speed: 40, accuracy: -25, resilience: -15, adaptability: 5 },
                    { text: "Look up their purchase history before deciding", speed: -15, accuracy: 45, resilience: 25, adaptability: 15 },
                    { text: "Ask them to provide proof of purchase", speed: 15, accuracy: 25, resilience: 20, adaptability: 5 },
                    { text: "Escalate to a manager to make the call", speed: 5, accuracy: 15, resilience: 10, adaptability: 25 }
                ]
            },
            {
                text: "You need to fire someone but HR says the documentation isn't sufficient yet. Your team is suffering. You:",
                answers: [
                    { text: "Fire them anyway - sometimes you have to act decisively", speed: 45, accuracy: -35, resilience: 5, adaptability: -25 },
                    { text: "Work with HR to fast-track the documentation process", speed: 10, accuracy: 25, resilience: 35, adaptability: 40 },
                    { text: "Wait for proper documentation while managing team morale", speed: -25, accuracy: 40, resilience: 25, adaptability: 5 },
                    { text: "Move the person to a different role temporarily", speed: 0, accuracy: 10, resilience: 20, adaptability: 35 }
                ]
            },
            {
                text: "A potential investor wants your financial projections, but they're based on optimistic assumptions. You:",
                answers: [
                    { text: "Send them as-is - investors expect optimistic projections", speed: 40, accuracy: -30, resilience: -10, adaptability: -20 },
                    { text: "Include a note explaining the assumptions behind the numbers", speed: 5, accuracy: 40, resilience: 30, adaptability: 25 },
                    { text: "Create conservative and optimistic scenarios", speed: -25, accuracy: 35, resilience: 25, adaptability: 40 },
                    { text: "Schedule a call to discuss the projections in context", speed: -15, accuracy: 25, resilience: 20, adaptability: 35 }
                ]
            },
            {
                text: "Your automated system flagged a transaction as potentially fraudulent, but the customer is insisting it's legitimate. You:",
                answers: [
                    { text: "Override the system and approve the transaction", speed: 40, accuracy: -35, resilience: -10, adaptability: 0 },
                    { text: "Ask for additional verification before processing", speed: -10, accuracy: 40, resilience: 25, adaptability: 15 },
                    { text: "Escalate to the fraud prevention team", speed: 0, accuracy: 30, resilience: 20, adaptability: 25 },
                    { text: "Temporarily hold the transaction while investigating", speed: -20, accuracy: 25, resilience: 30, adaptability: 20 }
                ]
            },
            {
                text: "You're offered two job opportunities: one with a known company (good but not great), another with an exciting startup (higher risk/reward). Decision needed today. You:",
                answers: [
                    { text: "Take the safe option with the established company", speed: 25, accuracy: 0, resilience: -15, adaptability: -25 },
                    { text: "Go with the startup - fortune favors the bold", speed: 40, accuracy: -15, resilience: 15, adaptability: 30 },
                    { text: "Ask both for a few more days to decide", speed: -30, accuracy: 25, resilience: 10, adaptability: 15 },
                    { text: "Negotiate with both to improve the offers before deciding", speed: -5, accuracy: 20, resilience: 35, adaptability: 45 }
                ]
            },
            {
                text: "Your algorithm is producing biased results, but fixing it properly would delay your product launch by 3 months. You:",
                answers: [
                    { text: "Launch as planned and fix the bias in the next version", speed: 45, accuracy: -40, resilience: -20, adaptability: 0 },
                    { text: "Implement a quick bias correction and launch on time", speed: 30, accuracy: -10, resilience: 10, adaptability: 15 },
                    { text: "Delay launch to properly address the bias issue", speed: -40, accuracy: 45, resilience: 40, adaptability: 25 },
                    { text: "Launch with clear disclaimers about current limitations", speed: 15, accuracy: 5, resilience: 25, adaptability: 35 }
                ]
            },
            {
                text: "You're leading a critical project and discover your initial timeline was overly optimistic. Stakeholders expect delivery next week. You:",
                answers: [
                    { text: "Push the team to work overtime and deliver on schedule", speed: 40, accuracy: -20, resilience: 0, adaptability: -15 },
                    { text: "Deliver a minimal viable version and iterate later", speed: 25, accuracy: -5, resilience: 15, adaptability: 25 },
                    { text: "Immediately inform stakeholders and negotiate a realistic timeline", speed: -10, accuracy: 40, resilience: 35, adaptability: 30 },
                    { text: "Quietly extend the timeline without formally announcing it", speed: 15, accuracy: -25, resilience: -10, adaptability: -20 }
                ]
            },
            {
                text: "During a live demo, your software crashes in front of 50 potential clients. You:",
                answers: [
                    { text: "Quickly restart and continue like nothing happened", speed: 40, accuracy: -15, resilience: 15, adaptability: 0 },
                    { text: "Acknowledge the issue and smoothly transition to backup slides", speed: 20, accuracy: 25, resilience: 35, adaptability: 40 },
                    { text: "Make a joke about technology and try the demo again", speed: 35, accuracy: -10, resilience: 20, adaptability: 25 },
                    { text: "Apologize and suggest rescheduling the demo", speed: -15, accuracy: 10, resilience: -20, adaptability: -25 }
                ]
            },
            {
                text: "You receive conflicting feedback from two senior executives about the direction of your project. You:",
                answers: [
                    { text: "Go with the feedback from the higher-ranking executive", speed: 30, accuracy: -15, resilience: 0, adaptability: -10 },
                    { text: "Try to find a compromise solution that addresses both concerns", speed: -10, accuracy: 25, resilience: 30, adaptability: 40 },
                    { text: "Schedule a meeting with both executives to resolve the conflict", speed: -20, accuracy: 35, resilience: 25, adaptability: 30 },
                    { text: "Continue with your original plan and see which executive complains", speed: 25, accuracy: -30, resilience: -15, adaptability: -25 }
                ]
            },
            {
                text: "You discover your competitor just launched a feature identical to what you've been developing for 6 months. You:",
                answers: [
                    { text: "Rush to launch our version immediately to stay competitive", speed: 45, accuracy: -25, resilience: 10, adaptability: 5 },
                    { text: "Pivot to develop a superior version that differentiates us", speed: -15, accuracy: 20, resilience: 25, adaptability: 45 },
                    { text: "Analyze their implementation to improve our approach", speed: -25, accuracy: 35, resilience: 20, adaptability: 25 },
                    { text: "Cancel the project and focus resources elsewhere", speed: 20, accuracy: -20, resilience: -25, adaptability: 15 }
                ]
            },
            {
                text: "A team member consistently misses deadlines but produces high-quality work when they do deliver. You:",
                answers: [
                    { text: "Give them an ultimatum to meet deadlines or face consequences", speed: 35, accuracy: -10, resilience: 10, adaptability: -15 },
                    { text: "Assign them to projects with more flexible timelines", speed: 10, accuracy: 20, resilience: 20, adaptability: 35 },
                    { text: "Work with them to understand and address the underlying issues", speed: -20, accuracy: 35, resilience: 30, adaptability: 40 },
                    { text: "Start transitioning their work to more reliable team members", speed: 15, accuracy: 5, resilience: 15, adaptability: 10 }
                ]
            }
        ];

        // Shuffle answer order for each question to prevent position bias
        function shuffleAnswers() {
            questions.forEach(question => {
                for (let i = question.answers.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [question.answers[i], question.answers[j]] = [question.answers[j], question.answers[i]];
                }
            });
        }

        // Call this once when the page loads
        shuffleAnswers();

        // State management
        let currentQuestion = 0;
        let scores = { speed: 0, accuracy: 0, resilience: 0, adaptability: 0 };
        let userPosition = { x: 0, y: 0 };
        let isDragging = false;
        let questionHistory = [];

        // DOM elements
        const compassView = document.getElementById('compass-view');
        const quizView = document.getElementById('quiz-view');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const backBtn = document.getElementById('back-btn');
        const skipBtn = document.getElementById('skip-btn');
        const userDot = document.getElementById('user-dot');
        const compassSvg = document.getElementById('compass-svg');

        // Initialize app
        function init() {
            updateDisplay();
            setupEventListeners();
        }

        function setupEventListeners() {
            startQuizBtn.addEventListener('click', startQuiz);
            backBtn.addEventListener('click', previousQuestion);
            skipBtn.addEventListener('click', nextQuestion);

            // Compass dragging
            userDot.addEventListener('mousedown', startDragging);
            compassSvg.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDragging);

            // Touch events for mobile
            userDot.addEventListener('touchstart', startDragging);
            compassSvg.addEventListener('touchmove', drag);
            document.addEventListener('touchend', stopDragging);
        }

        function startQuiz() {
            currentQuestion = 0;
            scores = { speed: 0, accuracy: 0, resilience: 0, adaptability: 0 };
            questionHistory = [];
            compassView.style.display = 'none';
            quizView.style.display = 'block';
            displayQuestion();
        }

        function displayQuestion() {
            const question = questions[currentQuestion];

            document.getElementById('current-q').textContent = currentQuestion + 1;
            document.getElementById('total-q').textContent = questions.length;
            document.getElementById('question-text').textContent = question.text;

            const progressPercent = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = progressPercent + '%';

            const answersContainer = document.getElementById('answers-container');
            answersContainer.innerHTML = '';

            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.innerHTML = `
            <div class="radio"></div>
            <div class="text">${answer.text}</div>
        `;
                button.addEventListener('click', () => selectAnswer(answer));
                answersContainer.appendChild(button);
            });

            // Update navigation buttons
            backBtn.disabled = currentQuestion === 0;
        }

        function selectAnswer(answer) {
            // Store current state in history
            questionHistory.push({
                question: currentQuestion,
                scores: { ...scores }
            });

            // Update scores
            Object.keys(answer).forEach(key => {
                if (key !== 'text' && scores.hasOwnProperty(key)) {
                    scores[key] += answer[key] || 0;
                }
            });

            nextQuestion();
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                displayQuestion();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0 && questionHistory.length > 0) {
                currentQuestion--;
                const previousState = questionHistory.pop();
                scores = previousState.scores;
                displayQuestion();
            }
        }

        function finishQuiz() {
            // Calculate final position based on speed and resilience (primary axes)
            const maxScore = questions.length * 25; // Max score per dimension is 25 per question
            const speedPercent = Math.max(0, Math.min(100, (scores.speed / maxScore) * 100));
            const resiliencePercent = Math.max(0, Math.min(100, (scores.resilience / maxScore) * 100));

            // Convert percentages to coordinate system (-100 to 100)
            const finalX = (speedPercent - 50) * 2;
            const finalY = (resiliencePercent - 50) * 2;

            userPosition = { x: finalX, y: finalY };
            updateDisplay();

            quizView.style.display = 'none';
            compassView.style.display = 'block';

            // Smooth animation to final position
            animateToPosition(finalX, finalY);
        }

        function animateToPosition(targetX, targetY) {
            const centerX = 300;
            const centerY = 300;

            const startX = parseFloat(userDot.getAttribute('cx'));
            const startY = parseFloat(userDot.getAttribute('cy'));

            const endX = centerX + (targetX * 2.5);
            const endY = centerY - (targetY * 2.5);

            let progress = 0;
            const duration = 2000; // 2 seconds
            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                progress = Math.min(elapsed / duration, 1);

                // Easing function for smooth animation
                const eased = 1 - Math.pow(1 - progress, 3);

                const currentX = startX + (endX - startX) * eased;
                const currentY = startY + (endY - startY) * eased;

                userDot.setAttribute('cx', currentX);
                userDot.setAttribute('cy', currentY);
                document.getElementById('user-label').setAttribute('x', currentX);
                document.getElementById('user-label').setAttribute('y', currentY - 20);

                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    // Update all displays after animation completes
                    updateDisplay();
                }
            }

            animate();
        }

        // Compass interaction functions
        function startDragging(e) {
            isDragging = true;
            e.preventDefault();
        }

        function drag(e) {
            if (!isDragging) return;

            e.preventDefault();
            const rect = compassSvg.getBoundingClientRect();
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;

            let clientX, clientY;
            if (e.type.includes('touch')) {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }

            const x = ((clientX - rect.left - centerX) / centerX) * 100;
            const y = ((centerY - (clientY - rect.top)) / centerY) * 100;

            const clampedX = Math.max(-100, Math.min(100, x));
            const clampedY = Math.max(-100, Math.min(100, y));

            userPosition = { x: clampedX, y: clampedY };
            updateUserDotPosition();
            updateScoreDisplays();
        }

        function stopDragging() {
            isDragging = false;
        }

        function updateUserDotPosition() {
            const svgX = 300 + (userPosition.x * 2.5);
            const svgY = 300 - (userPosition.y * 2.5);

            userDot.setAttribute('cx', svgX);
            userDot.setAttribute('cy', svgY);
            document.getElementById('user-label').setAttribute('x', svgX);
            document.getElementById('user-label').setAttribute('y', svgY - 20);
        }

        function updateDisplay() {
            updateUserDotPosition();
            updateScoreDisplays();
        }

        function updateScoreDisplays() {
            const { x, y } = userPosition;

            // Convert position to scores (0-100 scale)
            const speedScore = Math.round(Math.max(0, Math.min(100, (x + 100) / 2)));
            const resilienceScore = Math.round(Math.max(0, Math.min(100, (y + 100) / 2)));

            // If we have quiz scores, use those; otherwise use position
            let finalScores;
            if (scores.speed !== 0 || scores.accuracy !== 0 || scores.resilience !== 0 || scores.adaptability !== 0) {
                // New scoring system with negative values and wider ranges
                const maxPossibleScore = questions.length * 45; // Max positive score per dimension
                const minPossibleScore = questions.length * -50; // Max negative score per dimension
                const scoreRange = maxPossibleScore - minPossibleScore;

                finalScores = {
                    speed: Math.round(Math.max(0, Math.min(100, ((scores.speed - minPossibleScore) / scoreRange) * 100))),
                    accuracy: Math.round(Math.max(0, Math.min(100, ((scores.accuracy - minPossibleScore) / scoreRange) * 100))),
                    resilience: Math.round(Math.max(0, Math.min(100, ((scores.resilience - minPossibleScore) / scoreRange) * 100))),
                    adaptability: Math.round(Math.max(0, Math.min(100, ((scores.adaptability - minPossibleScore) / scoreRange) * 100)))
                };
            } else {
                finalScores = {
                    speed: speedScore,
                    accuracy: Math.round((speedScore + resilienceScore) / 2),
                    resilience: resilienceScore,
                    adaptability: Math.round((Math.abs(x) + Math.abs(y)) / 2)
                };
            }

            // Calculate overall intelligence score with weighted factors
            // Accuracy and resilience are weighted higher as they indicate better decision-making
            const overallScore = Math.round((finalScores.speed * 0.2 + finalScores.accuracy * 0.35 + finalScores.resilience * 0.3 + finalScores.adaptability * 0.15));

            // Update score displays
            document.getElementById('speed-score').textContent = `${finalScores.speed}/100`;
            document.getElementById('accuracy-score').textContent = `${finalScores.accuracy}/100`;
            document.getElementById('resilience-score').textContent = `${finalScores.resilience}/100`;
            document.getElementById('adaptability-score').textContent = `${finalScores.adaptability}/100`;
            document.getElementById('overall-score').textContent = `${overallScore}/100`;

            // Update progress bars
            document.getElementById('speed-fill').style.width = `${finalScores.speed}%`;
            document.getElementById('accuracy-fill').style.width = `${finalScores.accuracy}%`;
            document.getElementById('resilience-fill').style.width = `${finalScores.resilience}%`;
            document.getElementById('adaptability-fill').style.width = `${finalScores.adaptability}%`;

            // Update intelligence level and percentile
            const { level, percentile, profile } = getIntelligenceProfile(overallScore, finalScores);
            document.getElementById('intelligence-level').textContent = level;
            document.getElementById('percentile').textContent = percentile;
            document.getElementById('profile-title').innerHTML = `<span class="emoji">${profile.emoji}</span>${profile.title}`;
            document.getElementById('profile-description').textContent = profile.description;

            // Update strengths list
            const strengthsList = document.getElementById('strengths-list');
            strengthsList.innerHTML = '';

            profile.strengths.forEach(strength => {
                const strengthElement = document.createElement('div');
                strengthElement.className = 'strength-item';
                strengthElement.innerHTML = `
            <div class="strength-dot"></div>
            <span class="strength-text">${strength}</span>
        `;
                strengthsList.appendChild(strengthElement);
            });
        }

        function getIntelligenceProfile(overallScore, scores) {
            let level, percentile, profile;

            if (overallScore >= 95) {
                level = "Exceptional Genius";
                percentile = "Top 0.1%";
                profile = {
                    emoji: "🧠",
                    title: "Strategic Mastermind",
                    description: "You demonstrate extraordinary problem-solving abilities with perfect balance of speed, accuracy, and strategic thinking. You consistently make optimal decisions under extreme pressure.",
                    strengths: [
                        "Makes brilliant decisions at lightning speed",
                        "Maintains perfect accuracy under pressure",
                        "Adapts instantly to changing circumstances",
                        "Sees solutions others completely miss",
                        "Natural leadership in crisis situations"
                    ]
                };
            } else if (overallScore >= 85) {
                level = "Highly Superior Intelligence";
                percentile = "Top 1%";
                profile = {
                    emoji: "🚀",
                    title: "Elite Problem Solver",
                    description: "You exhibit exceptional cognitive abilities with excellent judgment and decision-making skills. You consistently outperform in high-pressure scenarios.",
                    strengths: [
                        "Superior analytical thinking under stress",
                        "Excellent balance of speed and accuracy",
                        "Strong strategic planning abilities",
                        "Adapts well to unexpected challenges",
                        "Reliable in critical decision-making"
                    ]
                };
            } else if (overallScore >= 75) {
                level = "Above Average Intelligence";
                percentile = "Top 10%";
                profile = {
                    emoji: "⚡",
                    title: "Capable Decision Maker",
                    description: "You show solid problem-solving skills with good performance under pressure. You handle complex situations effectively most of the time.",
                    strengths: [
                        "Good performance in stressful situations",
                        "Solid decision-making capabilities",
                        "Can handle moderate complexity well",
                        "Generally adapts when needed",
                        "Reliable in routine problem-solving"
                    ]
                };
            } else if (overallScore >= 60) {
                level = "Average Intelligence";
                percentile = "50th percentile";
                profile = {
                    emoji: "🎯",
                    title: "Steady Performer",
                    description: "You demonstrate average problem-solving capabilities. While you may struggle under intense pressure, you can handle standard challenges adequately.",
                    strengths: [
                        "Handles routine problems adequately",
                        "Works well with clear guidelines",
                        "Can solve problems with sufficient time",
                        "Learns from experience over time",
                        "Stable performance in low-pressure situations"
                    ]
                };
            } else if (overallScore >= 40) {
                level = "Below Average Intelligence";
                percentile = "Bottom 25%";
                profile = {
                    emoji: "🐌",
                    title: "Developing Decision Maker",
                    description: "You face significant challenges with problem-solving, especially under pressure. Focus on building systematic approaches and gaining more experience.",
                    strengths: [
                        "Can solve simple problems with guidance",
                        "Benefits from structured approaches",
                        "May excel in familiar, routine tasks",
                        "Shows potential for improvement with practice",
                        "Willing to learn from mistakes"
                    ]
                };
            } else if (overallScore >= 25) {
                level = "Significantly Below Average";
                percentile = "Bottom 10%";
                profile = {
                    emoji: "🔧",
                    title: "Needs Significant Development",
                    description: "Problem-solving under pressure is very challenging. Consider working with mentors, taking courses, or seeking roles with more structured support.",
                    strengths: [
                        "Recognizes the need for improvement",
                        "Can perform with significant support",
                        "May have strengths in other areas",
                        "Benefits from training and mentorship",
                        "Room for substantial growth"
                    ]
                };
            } else {
                level = "Critical Development Needed";
                percentile = "Bottom 5%";
                profile = {
                    emoji: "🆘",
                    title: "Requires Intensive Support - probably retarded",
                    description: "Decision-making and problem-solving require significant development. Seek structured training programs and close mentorship to build these critical skills.",
                    strengths: [
                        "Aware of current limitations",
                        "May excel with heavy structure and support",
                        "Can improve with dedicated effort",
                        "Should focus on one skill at a time",
                        "Benefits from step-by-step guidance"
                    ]
                };
            }

            return { level, percentile, profile };
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
