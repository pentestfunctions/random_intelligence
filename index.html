<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelligence Under Pressure Assessment</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .hidden {
            display: none;
        }

        /* Quiz Styles */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .quiz-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            color: #1f2937;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .quiz-title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .question-counter {
            text-align: right;
        }

        .question-counter .label {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 5px;
        }

        .question-counter .numbers {
            font-size: 1.5rem;
            font-weight: bold;
            color: #374151;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e5e7eb;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ef4444);
            border-radius: 6px;
            transition: width 0.5s ease;
            width: 4%;
        }

        .pressure-alert {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
        }

        .pressure-alert .icon {
            font-size: 1.5rem;
            margin-right: 15px;
        }

        .pressure-alert .text {
            font-weight: 600;
            color: #b91c1c;
        }

        .question-text {
            font-size: 1.4rem;
            font-weight: 600;
            color: #1f2937;
            line-height: 1.6;
            margin-bottom: 40px;
        }

        .answers-container {
            margin-bottom: 40px;
        }

        .answer-btn {
            width: 100%;
            background: linear-gradient(135deg, #ffffff 0%, #f9fafb 100%);
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            display: flex;
            align-items: flex-start;
        }

        .answer-btn:hover {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .answer-btn .radio {
            width: 24px;
            height: 24px;
            border: 2px solid #d1d5db;
            border-radius: 50%;
            margin-right: 15px;
            margin-top: 2px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .answer-btn:hover .radio {
            border-color: #3b82f6;
        }

        .answer-btn:hover .radio::after {
            content: '';
            width: 8px;
            height: 8px;
            background: #3b82f6;
            border-radius: 50%;
        }

        .answer-btn .text {
            font-weight: 500;
            color: #374151;
            line-height: 1.5;
            font-size: 1.1rem;
        }

        .quiz-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-btn {
            padding: 12px 24px;
            background: #f3f4f6;
            color: #6b7280;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-btn:hover:not(:disabled) {
            background: #e5e7eb;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quiz-hint {
            text-align: center;
            color: #6b7280;
            font-size: 0.9rem;
        }

        /* Main View Styles */
        .main-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .main-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #fbbf24, #ef4444, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .main-subtitle {
            font-size: 1.3rem;
            color: #d1d5db;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto 40px;
        }

        .start-btn {
            background: linear-gradient(135deg, #ef4444, #fbbf24);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.3rem;
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            align-items: start;
        }

        .compass-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .compass-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
        }

        .compass-title {
            text-align: center;
            margin-bottom: 20px;
        }

        .compass-title h3 {
            font-size: 1.5rem;
            color: #1f2937;
            margin-bottom: 5px;
        }

        .compass-title p {
            color: #6b7280;
        }

        .compass-svg {
            width: 100%;
            height: 600px;
            cursor: pointer;
            background-image:
                linear-gradient(rgba(71, 85, 105, 0.2) 1px, transparent 1px),
                linear-gradient(90deg, rgba(71, 85, 105, 0.2) 1px, transparent 1px);
            background-size: 25px 25px;
            border-radius: 10px;
        }

        .user-dot {
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .user-dot:hover {
            filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.3));
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .card {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .card-content {
            background: white;
            border-radius: 15px;
            padding: 25px;
        }

        .card h3 {
            font-size: 1.4rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .card h3 .emoji {
            margin-right: 10px;
        }

        .overall-score {
            text-align: center;
        }

        .score-badge {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #78350f;
            font-weight: bold;
            padding: 15px 25px;
            border-radius: 12px;
            font-size: 2rem;
            margin-bottom: 15px;
            display: inline-block;
        }

        .intelligence-level {
            font-size: 1.2rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }

        .percentile {
            color: #6b7280;
        }

        .dimension {
            margin-bottom: 25px;
        }

        .dimension-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .dimension-label {
            color: #374151;
            font-weight: 600;
        }

        .dimension-score {
            font-weight: bold;
            color: #3b82f6;
        }

        .dimension-bar {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .dimension-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.8s ease;
        }

        .speed-fill {
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
        }

        .accuracy-fill {
            background: linear-gradient(90deg, #10b981, #059669);
        }

        .resilience-fill {
            background: linear-gradient(90deg, #8b5cf6, #7c3aed);
        }

        .adaptability-fill {
            background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .dimension-desc {
            font-size: 0.8rem;
            color: #6b7280;
        }

        .profile-description {
            color: #374151;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .strengths-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 10px;
        }

        .strength-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .strength-dot {
            width: 6px;
            height: 6px;
            background: #10b981;
            border-radius: 50%;
            margin-right: 10px;
            margin-top: 6px;
            flex-shrink: 0;
        }

        .strength-text {
            color: #6b7280;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .info-card {
            background: #374151;
            border-radius: 20px;
            padding: 25px;
            border: 1px solid #4b5563;
        }

        .info-card h4 {
            color: white;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .info-card h4 .emoji {
            margin-right: 10px;
        }

        .info-card p {
            color: #d1d5db;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .main-title {
                font-size: 2.5rem;
            }

            .quiz-card {
                padding: 25px;
            }

            .quiz-title {
                font-size: 2rem;
            }

            .compass-svg {
                height: 400px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Quiz View -->
        <div id="quiz-view" class="hidden">
            <div class="quiz-container">
                <div class="quiz-card">
                    <div class="quiz-header">
                        <h2 class="quiz-title">Intelligence Under Pressure</h2>
                        <div class="question-counter">
                            <div class="label">Scenario</div>
                            <div class="numbers">
                                <span id="current-q">1</span> of <span id="total-q">20</span>
                            </div>
                        </div>
                    </div>

                    <div class="progress-bar">
                        <div id="progress-bar" class="progress-fill"></div>
                    </div>

                    <div class="pressure-alert">
                        <span class="icon">‚ö°</span>
                        <span class="text">HIGH PRESSURE SCENARIO</span>
                    </div>

                    <div class="question-text" id="question-text">
                        <!-- Question will be inserted here -->
                    </div>

                    <div class="answers-container" id="answers-container">
                        <!-- Answers will be inserted here -->
                    </div>

                    <div class="quiz-nav">
                        <button id="back-btn" class="nav-btn" disabled>‚Üê Previous</button>
                        <div class="quiz-hint">
                            <div>Choose your most honest response</div>
                            <div style="font-size: 0.8rem; margin-top: 3px;">This measures real problem-solving ability
                            </div>
                        </div>
                        <button id="skip-btn" class="nav-btn">Skip ‚Üí</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Assessment View -->
        <div id="compass-view">
            <div class="main-header">
                <h1 class="main-title">Intelligence Under Pressure</h1>
                <p class="main-subtitle">
                    True intelligence isn't just knowledge‚Äîit's the ability to solve problems quickly and accurately
                    when it matters most.
                    How do you perform when the pressure is on?
                </p>
                <button id="start-quiz-btn" class="start-btn">
                    üß† Measure Your Intelligence
                </button>
            </div>

            <div class="main-content">
                <div class="compass-section">
                    <div class="compass-container">
                        <div class="compass-title">
                            <h3>Problem-Solving Intelligence Map</h3>
                            <p>Speed vs. Resilience Under Pressure</p>
                        </div>

                        <svg id="compass-svg" class="compass-svg" viewBox="0 0 600 600">
                            <!-- Quadrant backgrounds -->
                            <rect x="300" y="0" width="300" height="300" fill="#10b981" opacity="0.15" />
                            <rect x="0" y="0" width="300" height="300" fill="#3b82f6" opacity="0.15" />
                            <rect x="0" y="300" width="300" height="300" fill="#ef4444" opacity="0.15" />
                            <rect x="300" y="300" width="300" height="300" fill="#f59e0b" opacity="0.15" />

                            <!-- Quadrant labels -->
                            <text x="150" y="30" text-anchor="middle" fill="#1e40af" font-size="16" font-weight="bold">
                                METHODICAL GENIUS
                            </text>
                            <text x="150" y="50" text-anchor="middle" fill="#1e40af" font-size="12" font-weight="600">
                                Slow + Resilient ‚Ä¢ High Intelligence
                            </text>

                            <text x="450" y="30" text-anchor="middle" fill="#047857" font-size="16" font-weight="bold">
                                PRESSURE PERFORMER
                            </text>
                            <text x="450" y="50" text-anchor="middle" fill="#047857" font-size="12" font-weight="600">
                                Fast + Resilient ‚Ä¢ Highest Intelligence
                            </text>

                            <text x="150" y="580" text-anchor="middle" fill="#dc2626" font-size="16" font-weight="bold">
                                OVERWHELMED
                            </text>
                            <text x="150" y="560" text-anchor="middle" fill="#dc2626" font-size="12" font-weight="600">
                                Slow + Fragile ‚Ä¢ Low Intelligence
                            </text>

                            <text x="450" y="580" text-anchor="middle" fill="#d97706" font-size="16" font-weight="bold">
                                QUICK BURNOUT
                            </text>
                            <text x="450" y="560" text-anchor="middle" fill="#d97706" font-size="12" font-weight="600">
                                Fast + Fragile ‚Ä¢ Medium Intelligence
                            </text>

                            <!-- Main axes -->
                            <line x1="300" y1="0" x2="300" y2="600" stroke="#1f2937" stroke-width="3" />
                            <line x1="0" y1="300" x2="600" y2="300" stroke="#1f2937" stroke-width="3" />

                            <!-- Axis labels -->
                            <text x="580" y="310" text-anchor="middle" fill="#374151" font-size="18" font-weight="bold">
                                SPEED ‚Üí
                            </text>
                            <text x="290" y="25" text-anchor="middle" fill="#374151" font-size="18" font-weight="bold"
                                transform="rotate(-90 290 25)">
                                ‚Üê RESILIENCE
                            </text>

                            <!-- Score indicators -->
                            <text x="30" y="310" text-anchor="middle" fill="#6b7280" font-size="14"
                                font-weight="600">0</text>
                            <text x="570" y="310" text-anchor="middle" fill="#6b7280" font-size="14"
                                font-weight="600">100</text>
                            <text x="290" y="590" text-anchor="middle" fill="#6b7280" font-size="14"
                                font-weight="600">0</text>
                            <text x="290" y="25" text-anchor="middle" fill="#6b7280" font-size="14"
                                font-weight="600">100</text>

                            <!-- User point -->
                            <circle id="user-dot" cx="300" cy="300" r="12" fill="#dc2626" stroke="white"
                                stroke-width="4" class="user-dot" />
                            <text id="user-label" x="300" y="280" text-anchor="middle" fill="#1f2937" font-size="14"
                                font-weight="bold">YOU</text>
                        </svg>
                    </div>
                </div>

                <div class="sidebar">
                    <!-- Overall Score -->
                    <div class="card">
                        <div class="card-content overall-score">
                            <h3><span class="emoji">üß†</span>Intelligence Score</h3>
                            <div id="overall-score" class="score-badge">50/100</div>
                            <div id="intelligence-level" class="intelligence-level">Average Problem Solver</div>
                            <div id="percentile" class="percentile">50th percentile</div>
                        </div>
                    </div>

                    <!-- Detailed Scores -->
                    <div class="card">
                        <div class="card-content">
                            <h3><span class="emoji">üìä</span>Intelligence Breakdown</h3>

                            <div class="dimension">
                                <div class="dimension-header">
                                    <span class="dimension-label">‚ö° Processing Speed</span>
                                    <span id="speed-score" class="dimension-score">50/100</span>
                                </div>
                                <div class="dimension-bar">
                                    <div id="speed-fill" class="dimension-fill speed-fill" style="width: 50%"></div>
                                </div>
                                <div class="dimension-desc">How quickly you analyze and respond</div>
                            </div>

                            <div class="dimension">
                                <div class="dimension-header">
                                    <span class="dimension-label">üéØ Accuracy Rate</span>
                                    <span id="accuracy-score" class="dimension-score">50/100</span>
                                </div>
                                <div class="dimension-bar">
                                    <div id="accuracy-fill" class="dimension-fill accuracy-fill" style="width: 50%">
                                    </div>
                                </div>
                                <div class="dimension-desc">How often you find correct solutions</div>
                            </div>

                            <div class="dimension">
                                <div class="dimension-header">
                                    <span class="dimension-label">üõ°Ô∏è Pressure Resilience</span>
                                    <span id="resilience-score" class="dimension-score">50/100</span>
                                </div>
                                <div class="dimension-bar">
                                    <div id="resilience-fill" class="dimension-fill resilience-fill" style="width: 50%">
                                    </div>
                                </div>
                                <div class="dimension-desc">How well you perform under stress</div>
                            </div>

                            <div class="dimension">
                                <div class="dimension-header">
                                    <span class="dimension-label">üîÑ Adaptability</span>
                                    <span id="adaptability-score" class="dimension-score">50/100</span>
                                </div>
                                <div class="dimension-bar">
                                    <div id="adaptability-fill" class="dimension-fill adaptability-fill"
                                        style="width: 50%"></div>
                                </div>
                                <div class="dimension-desc">How quickly you pivot when stuck</div>
                            </div>
                        </div>
                    </div>

                    <!-- Intelligence Profile -->
                    <div class="card">
                        <div class="card-content">
                            <h3 id="profile-title"><span class="emoji">üé≠</span>The Balanced Thinker</h3>
                            <div id="profile-description" class="profile-description">
                                You demonstrate average problem-solving capabilities across most scenarios.
                            </div>
                            <div class="strengths-title">Key Strengths:</div>
                            <div id="strengths-list">
                                <div class="strength-item">
                                    <div class="strength-dot"></div>
                                    <span class="strength-text">Maintains steady performance</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="info-card">
                        <h4><span class="emoji">üí°</span>About This Assessment</h4>
                        <p>
                            This assessment measures practical intelligence: your ability to solve real problems under
                            pressure.
                            It evaluates speed, accuracy, resilience, and adaptability in high-stakes scenarios.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced questions with more extreme scoring to capture true failure modes
    const questions = [
        {
            text: "You need to choose a vendor for a $500K project. You have 2 hours before the deadline. You:",
            answers: [
                { text: "Go with the vendor I've worked with before - I know they're reliable", speed: 40, accuracy: -10, resilience: 20, adaptability: -20 },
                { text: "Quickly compare the top 3 proposals on price and timeline", speed: 35, accuracy: -15, resilience: 10, adaptability: 5 },
                { text: "Spend time calling references for the most promising vendor", speed: -30, accuracy: 45, resilience: 30, adaptability: 15 },
                { text: "Ask for a 24-hour extension to properly evaluate all options", speed: -40, accuracy: 35, resilience: 5, adaptability: 25 }
            ]
        },
        {
            text: "Your entire team is looking to you for direction during a crisis, but you don't have enough information to make a good decision. You:",
            answers: [
                { text: "Make the best decision I can with available info and move forward", speed: 45, accuracy: 10, resilience: 25, adaptability: 20 },
                { text: "Tell the team I need 30 minutes to gather more information", speed: -20, accuracy: 35, resilience: 30, adaptability: 25 },
                { text: "Feel overwhelmed and ask someone else to make the call", speed: -30, accuracy: -30, resilience: -40, adaptability: -20 },
                { text: "Freeze up and hope someone else steps in", speed: -45, accuracy: -50, resilience: -50, adaptability: -45 }
            ]
        },
        {
            text: "You're 3 hours into debugging a critical system failure. You're exhausted, tried multiple approaches, and nothing works. The pressure is mounting. You:",
            answers: [
                { text: "Take a 15-minute break to clear my head, then try a fresh approach", speed: -15, accuracy: 30, resilience: 40, adaptability: 35 },
                { text: "Keep pushing through - I have to figure this out", speed: 20, accuracy: -20, resilience: -25, adaptability: -30 },
                { text: "Call in a colleague for fresh eyes and perspective", speed: 10, accuracy: 25, resilience: 25, adaptability: 30 },
                { text: "Start to panic and randomly try things hoping something works", speed: 25, accuracy: -45, resilience: -50, adaptability: -40 }
            ]
        },
        {
            text: "You have 5 conflicting high-priority tasks due today and your manager keeps adding more. You:",
            answers: [
                { text: "Try to do everything and work all night if necessary", speed: 30, accuracy: -30, resilience: -35, adaptability: -25 },
                { text: "Prioritize the most critical tasks and negotiate deadlines for others", speed: 15, accuracy: 35, resilience: 35, adaptability: 40 },
                { text: "Feel completely overwhelmed and don't know where to start", speed: -40, accuracy: -45, resilience: -50, adaptability: -40 },
                { text: "Quickly do a surface-level job on everything", speed: 45, accuracy: -40, resilience: -20, adaptability: -15 }
            ]
        },
        {
            text: "During a presentation to the board, you realize halfway through that your data is completely wrong. You:",
            answers: [
                { text: "Continue presenting and hope they don't notice", speed: 25, accuracy: -50, resilience: -30, adaptability: -45 },
                { text: "Stop immediately, acknowledge the error, and offer to reschedule", speed: -20, accuracy: 40, resilience: 45, adaptability: 30 },
                { text: "Panic and stumble through the rest hoping it gets better", speed: 15, accuracy: -45, resilience: -45, adaptability: -35 },
                { text: "Try to improvise and present what I remember without slides", speed: 30, accuracy: -25, resilience: 20, adaptability: 35 }
            ]
        },
        {
            text: "Your biggest client is furious about a service outage and threatening to leave. They want answers NOW. You:",
            answers: [
                { text: "Give them a quick explanation even though I don't have all the facts", speed: 40, accuracy: -35, resilience: 10, adaptability: -10 },
                { text: "Tell them I'll have a full report within 2 hours", speed: -10, accuracy: 30, resilience: 25, adaptability: 20 },
                { text: "Feel overwhelmed by their anger and transfer them to my manager", speed: -25, accuracy: -20, resilience: -45, adaptability: -30 },
                { text: "Immediately get the technical team on a call to explain together", speed: 20, accuracy: 25, resilience: 30, adaptability: 40 }
            ]
        },
        {
            text: "You discover a major security breach that could affect millions of users. Your CEO is in meetings all day. You:",
            answers: [
                { text: "Wait for the CEO to be available - this is too big for me to handle", speed: -35, accuracy: -30, resilience: -40, adaptability: -35 },
                { text: "Immediately activate the incident response protocol", speed: 35, accuracy: 45, resilience: 40, adaptability: 35 },
                { text: "Feel paralyzed by the magnitude and hope someone else discovers it", speed: -50, accuracy: -50, resilience: -50, adaptability: -50 },
                { text: "Try to fix it myself quietly before telling anyone", speed: 40, accuracy: -40, resilience: -25, adaptability: -20 }
            ]
        },
        {
            text: "Three major crises hit your department simultaneously. Your team is looking to you for leadership. You:",
            answers: [
                { text: "Delegate each crisis to different team members and coordinate", speed: 25, accuracy: 35, resilience: 40, adaptability: 45 },
                { text: "Try to personally handle all three at once", speed: 45, accuracy: -35, resilience: -40, adaptability: -30 },
                { text: "Feel completely overwhelmed and don't know where to start", speed: -45, accuracy: -40, resilience: -50, adaptability: -45 },
                { text: "Focus intensely on one crisis and ignore the others for now", speed: 35, accuracy: -20, resilience: -25, adaptability: -35 }
            ]
        },
        {
            text: "You're in charge of a critical launch, but 2 hours before going live, you discover the system will likely crash under load. You:",
            answers: [
                { text: "Launch anyway and hope for the best - we can fix issues as they come", speed: 45, accuracy: -50, resilience: -30, adaptability: -25 },
                { text: "Immediately delay the launch and fix the performance issues", speed: -25, accuracy: 45, resilience: 40, adaptability: 30 },
                { text: "Panic and don't know what to do - the pressure is too much", speed: -40, accuracy: -45, resilience: -50, adaptability: -40 },
                { text: "Launch with limited capacity to reduce the risk", speed: 20, accuracy: 15, resilience: 25, adaptability: 35 }
            ]
        },
        {
            text: "Your manager asks you to fire a team member immediately, but you know it's for illegal reasons. The pressure is intense. You:",
            answers: [
                { text: "Do what my manager says - I can't afford to lose my job", speed: 30, accuracy: -45, resilience: -35, adaptability: -40 },
                { text: "Refuse and escalate to HR, knowing it might hurt my career", speed: -20, accuracy: 45, resilience: 45, adaptability: 25 },
                { text: "Feel trapped and don't know what to do - this is too much pressure", speed: -35, accuracy: -30, resilience: -45, adaptability: -35 },
                { text: "Try to find a compromise that satisfies everyone", speed: 15, accuracy: -10, resilience: 10, adaptability: 20 }
            ]
        },
        {
            text: "During a live demo to 200+ people, everything goes wrong. Multiple systems fail. The audience is getting restless. You:",
            answers: [
                { text: "Keep trying to make the demo work while explaining what's happening", speed: 25, accuracy: -25, resilience: 20, adaptability: 15 },
                { text: "Smoothly transition to talking about the product without the demo", speed: 20, accuracy: 30, resilience: 40, adaptability: 45 },
                { text: "Freeze up in front of everyone - this is my worst nightmare", speed: -45, accuracy: -40, resilience: -50, adaptability: -45 },
                { text: "Apologize profusely and suggest ending the session early", speed: -20, accuracy: -30, resilience: -35, adaptability: -25 }
            ]
        },
        {
            text: "You're managing a project with an impossible deadline. Your team is burning out, but stakeholders keep demanding faster delivery. You:",
            answers: [
                { text: "Push the team harder - we have to meet this deadline no matter what", speed: 40, accuracy: -30, resilience: -35, adaptability: -25 },
                { text: "Have an honest conversation with stakeholders about realistic timelines", speed: -15, accuracy: 40, resilience: 35, adaptability: 30 },
                { text: "Feel overwhelmed and don't know how to balance these competing pressures", speed: -30, accuracy: -35, resilience: -45, adaptability: -40 },
                { text: "Cut scope dramatically to meet the timeline", speed: 35, accuracy: 10, resilience: 20, adaptability: 35 }
            ]
        },
        {
            text: "A critical server is down, customers are complaining, and you're the only one who can fix it. But you've never dealt with this type of failure before. You:",
            answers: [
                { text: "Start trying random fixes hoping something works", speed: 35, accuracy: -45, resilience: -25, adaptability: -20 },
                { text: "Immediately call the vendor support and escalate to priority", speed: 15, accuracy: 30, resilience: 25, adaptability: 35 },
                { text: "Feel overwhelmed by the responsibility and pressure", speed: -40, accuracy: -35, resilience: -50, adaptability: -35 },
                { text: "Systematically work through the troubleshooting guide", speed: -20, accuracy: 40, resilience: 35, adaptability: 25 }
            ]
        },
        {
            text: "Your company's stock is plummeting after bad news. Investors are calling for answers. Media is asking questions. Everyone's looking to you. You:",
            answers: [
                { text: "Give quick interviews to control the narrative", speed: 45, accuracy: -25, resilience: 15, adaptability: 10 },
                { text: "Work with PR to craft a thoughtful response strategy", speed: -10, accuracy: 35, resilience: 30, adaptability: 40 },
                { text: "Feel completely overwhelmed by the attention and pressure", speed: -40, accuracy: -35, resilience: -50, adaptability: -40 },
                { text: "Avoid media and let the PR team handle everything", speed: -25, accuracy: -15, resilience: -30, adaptability: -20 }
            ]
        },
        {
            text: "You realize you've been implementing the wrong solution for 3 months. The real deadline is tomorrow. Your reputation is on the line. You:",
            answers: [
                { text: "Work all night to try to build the right solution", speed: 40, accuracy: -35, resilience: -30, adaptability: -20 },
                { text: "Immediately inform stakeholders and negotiate an extension", speed: -20, accuracy: 40, resilience: 45, adaptability: 35 },
                { text: "Feel devastated and don't know how to recover from this mistake", speed: -40, accuracy: -40, resilience: -50, adaptability: -45 },
                { text: "Try to adapt the wrong solution to partially meet requirements", speed: 25, accuracy: -15, resilience: 20, adaptability: 30 }
            ]
        },
        {
            text: "During a board meeting, you're asked a complex financial question you don't know. Everyone's waiting. You:",
            answers: [
                { text: "Make up an answer that sounds reasonable", speed: 40, accuracy: -50, resilience: -20, adaptability: -30 },
                { text: "Admit I don't know and offer to follow up with detailed analysis", speed: -15, accuracy: 45, resilience: 40, adaptability: 25 },
                { text: "Feel embarrassed and stumble through a non-answer", speed: -25, accuracy: -35, resilience: -40, adaptability: -30 },
                { text: "Deflect by talking about related topics I do know", speed: 30, accuracy: -20, resilience: 10, adaptability: 15 }
            ]
        },
        {
            text: "Your team member makes a mistake that could cost the company $1M. They're panicking and asking what to do. You:",
            answers: [
                { text: "Tell them to fix it quietly and not tell anyone", speed: 35, accuracy: -40, resilience: -25, adaptability: -30 },
                { text: "Immediately escalate to leadership and work on damage control", speed: 15, accuracy: 40, resilience: 35, adaptability: 35 },
                { text: "Feel overwhelmed and don't know how to handle this situation", speed: -35, accuracy: -30, resilience: -45, adaptability: -40 },
                { text: "Blame them for the mistake and distance myself from it", speed: 25, accuracy: -45, resilience: -35, adaptability: -35 }
            ]
        },
        {
            text: "You're leading negotiations for a crucial deal. The other party is being extremely aggressive and making unreasonable demands. You:",
            answers: [
                { text: "Give in to their demands to close the deal quickly", speed: 40, accuracy: -30, resilience: -35, adaptability: -20 },
                { text: "Stand firm on key terms while finding areas of compromise", speed: 10, accuracy: 35, resilience: 40, adaptability: 45 },
                { text: "Feel intimidated and unsure how to respond to their aggression", speed: -35, accuracy: -25, resilience: -45, adaptability: -30 },
                { text: "Walk away from the negotiations entirely", speed: 20, accuracy: -20, resilience: -15, adaptability: -25 }
            ]
        },
        {
            text: "You discover your competitor is about to announce a product that makes yours obsolete. The news breaks in 6 hours. You:",
            answers: [
                { text: "Immediately announce our product first, even though it's not ready", speed: 45, accuracy: -40, resilience: -20, adaptability: -15 },
                { text: "Call an emergency strategy meeting to plan our response", speed: 20, accuracy: 35, resilience: 35, adaptability: 40 },
                { text: "Feel devastated - all our work has been for nothing", speed: -40, accuracy: -35, resilience: -50, adaptability: -40 },
                { text: "Do nothing and hope our product still has some market", speed: -30, accuracy: -45, resilience: -40, adaptability: -45 }
            ]
        },
        {
            text: "Your most important client calls screaming about a bug that's costing them money every minute. You've never seen this bug before. You:",
            answers: [
                { text: "Tell them we'll fix it immediately while privately panicking", speed: 35, accuracy: -25, resilience: -30, adaptability: -15 },
                { text: "Acknowledge the urgency and get the right technical experts involved", speed: 15, accuracy: 35, resilience: 30, adaptability: 40 },
                { text: "Feel overwhelmed by their anger and the pressure to fix something I don't understand", speed: -35, accuracy: -30, resilience: -50, adaptability: -35 },
                { text: "Try random fixes hoping to stumble onto the solution", speed: 40, accuracy: -45, resilience: -25, adaptability: -20 }
            ]
        }
    ];

        // Shuffle answer order for each question to prevent position bias
        function shuffleAnswers() {
            questions.forEach(question => {
                for (let i = question.answers.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [question.answers[i], question.answers[j]] = [question.answers[j], question.answers[i]];
                }
            });
        }

        // Call this once when the page loads
        shuffleAnswers();

        // State management
        let currentQuestion = 0;
        let scores = { speed: 0, accuracy: 0, resilience: 0, adaptability: 0 };
        let userPosition = { x: 0, y: 0 };
        let isDragging = false;
        let questionHistory = [];

        // DOM elements
        const compassView = document.getElementById('compass-view');
        const quizView = document.getElementById('quiz-view');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const backBtn = document.getElementById('back-btn');
        const skipBtn = document.getElementById('skip-btn');
        const userDot = document.getElementById('user-dot');
        const compassSvg = document.getElementById('compass-svg');

        // Initialize app
        function init() {
            updateDisplay();
            setupEventListeners();
        }

        function setupEventListeners() {
            startQuizBtn.addEventListener('click', startQuiz);
            backBtn.addEventListener('click', previousQuestion);
            skipBtn.addEventListener('click', nextQuestion);

            // Compass dragging
            userDot.addEventListener('mousedown', startDragging);
            compassSvg.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDragging);

            // Touch events for mobile
            userDot.addEventListener('touchstart', startDragging);
            compassSvg.addEventListener('touchmove', drag);
            document.addEventListener('touchend', stopDragging);
        }

        function startQuiz() {
            currentQuestion = 0;
            scores = { speed: 0, accuracy: 0, resilience: 0, adaptability: 0 };
            questionHistory = [];
            compassView.style.display = 'none';
            quizView.style.display = 'block';
            displayQuestion();
        }

        function displayQuestion() {
            const question = questions[currentQuestion];

            document.getElementById('current-q').textContent = currentQuestion + 1;
            document.getElementById('total-q').textContent = questions.length;
            document.getElementById('question-text').textContent = question.text;

            const progressPercent = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = progressPercent + '%';

            const answersContainer = document.getElementById('answers-container');
            answersContainer.innerHTML = '';

            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.innerHTML = `
                    <div class="radio"></div>
                    <div class="text">${answer.text}</div>
                `;
                button.addEventListener('click', () => selectAnswer(answer));
                answersContainer.appendChild(button);
            });

            // Update navigation buttons
            backBtn.disabled = currentQuestion === 0;
        }

        function selectAnswer(answer) {
            // Store current state in history
            questionHistory.push({
                question: currentQuestion,
                scores: { ...scores }
            });

            // Update scores
            Object.keys(answer).forEach(key => {
                if (key !== 'text' && scores.hasOwnProperty(key)) {
                    scores[key] += answer[key] || 0;
                }
            });

            nextQuestion();
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                displayQuestion();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0 && questionHistory.length > 0) {
                currentQuestion--;
                const previousState = questionHistory.pop();
                scores = previousState.scores;
                displayQuestion();
            }
        }

        function finishQuiz() {
            // Calculate final position based on speed and resilience (primary axes)
            const maxPossibleScore = questions.length * 45;
            const minPossibleScore = questions.length * -50;
            const scoreRange = maxPossibleScore - minPossibleScore;

            const speedPercent = ((scores.speed - minPossibleScore) / scoreRange) * 100;
            const resiliencePercent = ((scores.resilience - minPossibleScore) / scoreRange) * 100;

            // Convert percentages to coordinate system (-100 to 100)
            const finalX = (speedPercent - 50) * 2;
            const finalY = (resiliencePercent - 50) * 2;

            userPosition = { x: finalX, y: finalY };
            updateDisplay();

            quizView.style.display = 'none';
            compassView.style.display = 'block';

            // Smooth animation to final position
            animateToPosition(finalX, finalY);
        }

        function animateToPosition(targetX, targetY) {
            const centerX = 300;
            const centerY = 300;

            const startX = parseFloat(userDot.getAttribute('cx'));
            const startY = parseFloat(userDot.getAttribute('cy'));

            const endX = centerX + (targetX * 2.5);
            const endY = centerY - (targetY * 2.5);

            let progress = 0;
            const duration = 2000; // 2 seconds
            const startTime = Date.now();

            function animate() {
                const elapsed = Date.now() - startTime;
                progress = Math.min(elapsed / duration, 1);

                // Easing function for smooth animation
                const eased = 1 - Math.pow(1 - progress, 3);

                const currentX = startX + (endX - startX) * eased;
                const currentY = startY + (endY - startY) * eased;

                userDot.setAttribute('cx', currentX);
                userDot.setAttribute('cy', currentY);
                document.getElementById('user-label').setAttribute('x', currentX);
                document.getElementById('user-label').setAttribute('y', currentY - 20);

                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    // Update all displays after animation completes
                    updateDisplay();
                }
            }

            animate();
        }

        // Compass interaction functions
        function startDragging(e) {
            isDragging = true;
            e.preventDefault();
        }

        function drag(e) {
            if (!isDragging) return;

            e.preventDefault();
            const rect = compassSvg.getBoundingClientRect();
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;

            let clientX, clientY;
            if (e.type.includes('touch')) {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }

            const x = ((clientX - rect.left - centerX) / centerX) * 100;
            const y = ((centerY - (clientY - rect.top)) / centerY) * 100;

            const clampedX = Math.max(-100, Math.min(100, x));
            const clampedY = Math.max(-100, Math.min(100, y));

            userPosition = { x: clampedX, y: clampedY };
            updateUserDotPosition();
            updateScoreDisplays();
        }

        function stopDragging() {
            isDragging = false;
        }

        function updateUserDotPosition() {
            const svgX = 300 + (userPosition.x * 2.5);
            const svgY = 300 - (userPosition.y * 2.5);

            userDot.setAttribute('cx', svgX);
            userDot.setAttribute('cy', svgY);
            document.getElementById('user-label').setAttribute('x', svgX);
            document.getElementById('user-label').setAttribute('y', svgY - 20);
        }

        function updateDisplay() {
            updateUserDotPosition();
            updateScoreDisplays();
        }

        function updateScoreDisplays() {
            const { x, y } = userPosition;

            // Convert position to scores (0-100 scale)
            const speedScore = Math.round(Math.max(0, Math.min(100, (x + 100) / 2)));
            const resilienceScore = Math.round(Math.max(0, Math.min(100, (y + 100) / 2)));

            // If we have quiz scores, use those; otherwise use position
            let finalScores;
            if (scores.speed !== 0 || scores.accuracy !== 0 || scores.resilience !== 0 || scores.adaptability !== 0) {
                // Enhanced scoring system with more extreme ranges
                const maxPossibleScore = questions.length * 45; // Max positive score per dimension
                const minPossibleScore = questions.length * -50; // Max negative score per dimension (more negative)
                const scoreRange = maxPossibleScore - minPossibleScore;

                finalScores = {
                    speed: Math.round(Math.max(0, Math.min(100, ((scores.speed - minPossibleScore) / scoreRange) * 100))),
                    accuracy: Math.round(Math.max(0, Math.min(100, ((scores.accuracy - minPossibleScore) / scoreRange) * 100))),
                    resilience: Math.round(Math.max(0, Math.min(100, ((scores.resilience - minPossibleScore) / scoreRange) * 100))),
                    adaptability: Math.round(Math.max(0, Math.min(100, ((scores.adaptability - minPossibleScore) / scoreRange) * 100)))
                };
            } else {
                finalScores = {
                    speed: speedScore,
                    accuracy: Math.round((speedScore + resilienceScore) / 2),
                    resilience: resilienceScore,
                    adaptability: Math.round((Math.abs(x) + Math.abs(y)) / 2)
                };
            }

            // Calculate overall intelligence score with enhanced weighting
            // Accuracy gets highest weight, then resilience, to better identify high performers
            const overallScore = Math.round((finalScores.speed * 0.15 + finalScores.accuracy * 0.40 + finalScores.resilience * 0.35 + finalScores.adaptability * 0.10));

            // Update score displays
            document.getElementById('speed-score').textContent = `${finalScores.speed}/100`;
            document.getElementById('accuracy-score').textContent = `${finalScores.accuracy}/100`;
            document.getElementById('resilience-score').textContent = `${finalScores.resilience}/100`;
            document.getElementById('adaptability-score').textContent = `${finalScores.adaptability}/100`;
            document.getElementById('overall-score').textContent = `${overallScore}/100`;

            // Update progress bars
            document.getElementById('speed-fill').style.width = `${finalScores.speed}%`;
            document.getElementById('accuracy-fill').style.width = `${finalScores.accuracy}%`;
            document.getElementById('resilience-fill').style.width = `${finalScores.resilience}%`;
            document.getElementById('adaptability-fill').style.width = `${finalScores.adaptability}%`;

            // Update intelligence level and percentile
            const { level, percentile, profile } = getIntelligenceProfile(overallScore, finalScores);
            document.getElementById('intelligence-level').textContent = level;
            document.getElementById('percentile').textContent = percentile;
            document.getElementById('profile-title').innerHTML = `<span class="emoji">${profile.emoji}</span>${profile.title}`;
            document.getElementById('profile-description').textContent = profile.description;

            // Update strengths list
            const strengthsList = document.getElementById('strengths-list');
            strengthsList.innerHTML = '';

            profile.strengths.forEach(strength => {
                const strengthElement = document.createElement('div');
                strengthElement.className = 'strength-item';
                strengthElement.innerHTML = `
                    <div class="strength-dot"></div>
                    <span class="strength-text">${strength}</span>
                `;
                strengthsList.appendChild(strengthElement);
            });
        }

        function getIntelligenceProfile(overallScore, scores) {
            let level, percentile, profile;

            // Enhanced profiling to better identify failure modes
            if (overallScore >= 90) {
                level = "Exceptional Genius";
                percentile = "Top 0.1%";
                profile = {
                    emoji: "üß†",
                    title: "Strategic Mastermind",
                    description: "You demonstrate extraordinary problem-solving abilities with perfect balance of speed, accuracy, and strategic thinking. You consistently make optimal decisions under extreme pressure.",
                    strengths: [
                        "Makes brilliant decisions at lightning speed",
                        "Maintains perfect accuracy under pressure",
                        "Adapts instantly to changing circumstances",
                        "Sees solutions others completely miss",
                        "Natural leadership in crisis situations"
                    ]
                };
            } else if (overallScore >= 80) {
                level = "Highly Superior Intelligence";
                percentile = "Top 2%";
                profile = {
                    emoji: "üöÄ",
                    title: "Elite Problem Solver",
                    description: "You exhibit exceptional cognitive abilities with excellent judgment and decision-making skills. You consistently outperform in high-pressure scenarios.",
                    strengths: [
                        "Superior analytical thinking under stress",
                        "Excellent balance of speed and accuracy",
                        "Strong strategic planning abilities",
                        "Adapts well to unexpected challenges",
                        "Reliable in critical decision-making"
                    ]
                };
            } else if (overallScore >= 70) {
                level = "Above Average Intelligence";
                percentile = "Top 15%";
                profile = {
                    emoji: "‚ö°",
                    title: "Capable Decision Maker",
                    description: "You show solid problem-solving skills with good performance under pressure. You handle complex situations effectively most of the time.",
                    strengths: [
                        "Good performance in stressful situations",
                        "Solid decision-making capabilities",
                        "Can handle moderate complexity well",
                        "Generally adapts when needed",
                        "Reliable in routine problem-solving"
                    ]
                };
            } else if (overallScore >= 55) {
                level = "Average Intelligence";
                percentile = "50th percentile";
                profile = {
                    emoji: "üéØ",
                    title: "Steady Performer",
                    description: "You demonstrate average problem-solving capabilities. While you may struggle under intense pressure, you can handle standard challenges adequately.",
                    strengths: [
                        "Handles routine problems adequately",
                        "Works well with clear guidelines",
                        "Can solve problems with sufficient time",
                        "Learns from experience over time",
                        "Stable performance in low-pressure situations"
                    ]
                };
            } else if (overallScore >= 40) {
                level = "Below Average Intelligence";
                percentile = "Bottom 30%";
                profile = {
                    emoji: "üêå",
                    title: "Developing Decision Maker",
                    description: "You face significant challenges with problem-solving, especially under pressure. Focus on building systematic approaches and gaining more experience.",
                    strengths: [
                        "Can solve simple problems with guidance",
                        "Benefits from structured approaches",
                        "May excel in familiar, routine tasks",
                        "Shows potential for improvement with practice",
                        "Willing to learn from mistakes"
                    ]
                };
            } else if (overallScore >= 25) {
                level = "Significantly Impaired";
                percentile = "Bottom 15%";
                profile = {
                    emoji: "üîß",
                    title: "Struggles Under Pressure",
                    description: "You consistently struggle with decision-making under pressure and may become overwhelmed in crisis situations. Consider seeking structured support and training.",
                    strengths: [
                        "Recognizes the need for improvement",
                        "Can perform basic tasks with support",
                        "May function better in low-pressure environments",
                        "Benefits from clear procedures and guidance",
                        "Room for significant development"
                    ]
                };
            } else {
                level = "Critical Impairment";
                percentile = "Bottom 5%";
                profile = {
                    emoji: "üÜò",
                    title: "Overwhelmed by Complexity",
                    description: "You tend to become overwhelmed or make poor decisions when faced with pressure or complexity. This indicates a need for intensive support and structured training in decision-making skills.",
                    strengths: [
                        "Aware of current limitations",
                        "May excel in highly structured environments",
                        "Can improve with intensive support",
                        "Should focus on building basic skills first",
                        "Benefits from step-by-step guidance and mentoring"
                    ]
                };
            }

            return { level, percentile, profile };
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
